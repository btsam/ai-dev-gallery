<?xml version="1.0" encoding="utf-8" ?>
<Page
    x:Class="AIDevGallery.Pages.ModelOverviewPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:controls="using:AIDevGallery.Controls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="using:AIDevGallery.Pages"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:media="using:CommunityToolkit.WinUI.Media"
    xmlns:models="using:AIDevGallery.Models"
    xmlns:ui="using:CommunityToolkit.WinUI"
    xmlns:utils="using:AIDevGallery.Utils"
    mc:Ignorable="d">

    <Grid BorderBrush="{ThemeResource DividerStrokeColorDefaultBrush}" BorderThickness="1,0,0,0">

        <ScrollViewer Grid.Row="1">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>
                <Grid Height="240" CornerRadius="0">
                    <!--<Grid.Lights>
                        <controls:HoverLight />
                        <controls:AmbLight />
                    </Grid.Lights>-->
                    <Grid Opacity="0.25">
                        <Grid.Background>
                            <LinearGradientBrush StartPoint="0.5,0" EndPoint="1, 1">
                                <GradientStop Offset="0" Color="#9994CE" />
                                <GradientStop Offset="0.5" Color="#2D87F1" />
                                <GradientStop Offset="1" Color="Transparent" />
                            </LinearGradientBrush>
                        </Grid.Background>
                    </Grid>
                    <StackPanel Margin="24,16,24,16" Orientation="Vertical">
                        <TextBlock Style="{StaticResource SubtitleTextBlockStyle}" Text="Overview" />
                        <TextBlock
                            Width="386"
                            Margin="0,12,0,12"
                            HorizontalAlignment="Left"
                            TextWrapping="Wrap">
                            <Run Text="Discover the latest, cutting-edge AI models from HuggingFace, all in one central hub. Download them effortlessly and manage your collection with ease." /><LineBreak /><LineBreak /><Run Text="Can't find your favorite language model?" />
                        </TextBlock>

                        <Button Click="Button_Click">
                            <Button.Content>
                                <StackPanel Orientation="Horizontal" Spacing="8">
                                    <SymbolIcon Symbol="Add" />
                                    <TextBlock Text="Add new language model" />
                                </StackPanel>
                            </Button.Content>
                        </Button>
                    </StackPanel>

                    <Canvas
                        Width="260"
                        Margin="0,-16,36,0"
                        HorizontalAlignment="Right"
                        VerticalAlignment="Top">


                        <Grid
                            Canvas.Left="36"
                            Canvas.Top="86"
                            Padding="16"
                            VerticalAlignment="Center"
                            Style="{StaticResource CardGridStyle}">
                            <Image Width="56" Source="/Assets/ModelIcons/Microsoft.svg" />
                        </Grid>

                        <Grid
                            Canvas.Left="82"
                            Canvas.Top="186"
                            Padding="8"
                            VerticalAlignment="Center"
                            Style="{StaticResource CardGridStyle}">
                            <Image Width="24" Source="/Assets/ModelIcons/HuggingFace.svg" />
                        </Grid>


                        <Grid
                            Canvas.Left="140"
                            Canvas.Top="120"
                            Padding="16"
                            VerticalAlignment="Center"
                            Style="{StaticResource CardGridStyle}">
                            <Image Width="48" Source="/Assets/ModelIcons/GitHub.light.svg" />
                        </Grid>
                        <Grid
                            Canvas.Left="140"
                            Canvas.Top="36"
                            Padding="16"
                            VerticalAlignment="Center"
                            Style="{StaticResource CardGridStyle}">
                            <Image Width="36" Source="/Assets/ModelIcons/Mistral.svg" />
                        </Grid>
                        <Grid
                            Canvas.Left="82                             "
                            Canvas.Top="36"
                            Padding="8"
                            VerticalAlignment="Center"
                            Style="{StaticResource CardGridStyle}">
                            <Image Width="24" Source="/Assets/ModelIcons/OpenAI.png" />
                        </Grid>
                    </Canvas>


                </Grid>

                <StackPanel
                    Grid.Row="1"
                    Padding="24,36,24,24"
                    Orientation="Vertical">
                    <StackPanel Margin="2,0,0,8" Orientation="Horizontal">
                        <TextBlock
                            Margin="0,0,8,0"
                            Style="{StaticResource SubtitleTextBlockStyle}"
                            Text="Installed models" />
                        <TextBlock
                            Margin="0,6,0,0"
                            VerticalAlignment="Center"
                            Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                            Text="7.8 GB" />
                    </StackPanel>
                    <ItemsView
                        x:Name="InstalledModelsView"
                        IsItemInvokedEnabled="True"
                        SelectionMode="None">
                        <ItemsView.Layout>
                            <UniformGridLayout
                                ItemsStretch="Fill"
                                MinColumnSpacing="8"
                                MinItemWidth="168"
                                MinRowSpacing="12" />
                        </ItemsView.Layout>
                        <ItemsView.ItemTemplate>
                            <DataTemplate x:DataType="models:CachedModel">
                                <ItemContainer>
                                    <Grid
                                        Padding="16"
                                        ColumnSpacing="4"
                                        Style="{StaticResource CardGridStyle}"
                                        ToolTipService.ToolTip="{x:Bind Details.Name}">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto" />
                                            <RowDefinition Height="Auto" />
                                            <RowDefinition Height="Auto" />
                                        </Grid.RowDefinitions>
                                        <Image
                                            Width="24"
                                            HorizontalAlignment="Left"
                                            Source="{x:Bind Details.Icon}" />
                                        <Button
                                            Margin="0,0,-16,0"
                                            HorizontalAlignment="Right"
                                            Content="{ui:FontIcon Glyph=&#xE712;,
                                                                  FontSize=16}"
                                            Style="{StaticResource SubtleButtonStyle}">
                                            <Button.Flyout>
                                                <MenuFlyout Placement="Bottom">
                                                    <MenuFlyoutItem Icon="{ui:FontIcon Glyph=&#xE8A5;}" Text="View model card" />
                                                    <MenuFlyoutItem Icon="{ui:FontIcon Glyph=&#xE82D;}" Text="View license" />
                                                    <MenuFlyoutItem Icon="{ui:FontIcon Glyph=&#xE8C8;}" Text="Copy as path" />
                                                    <MenuFlyoutItem Icon="{ui:FontIcon Glyph=&#xE838;}" Text="Open containing folder" />
                                                    <MenuFlyoutSeparator />
                                                    <MenuFlyoutItem Icon="{ui:FontIcon Glyph=&#xE74D;}" Text="Delete" />
                                                </MenuFlyout>
                                            </Button.Flyout>
                                        </Button>
                                        <TextBlock
                                            Grid.Row="1"
                                            MaxWidth="260"
                                            Margin="0,8,0,6"
                                            VerticalAlignment="Center"
                                            Style="{StaticResource BodyStrongTextBlockStyle}"
                                            Text="{x:Bind Details.Name}"
                                            TextTrimming="CharacterEllipsis"
                                            TextWrapping="NoWrap" />
                                        <StackPanel
                                            Grid.Row="2"
                                            Orientation="Horizontal"
                                            Spacing="8">
                                            <ItemsRepeater
                                                Grid.Row="1"
                                                Grid.Column="1"
                                                ItemsSource="{x:Bind Details.HardwareAccelerators}">
                                                <ItemsRepeater.Layout>
                                                    <StackLayout Orientation="Horizontal" Spacing="4" />
                                                </ItemsRepeater.Layout>
                                                <ItemsRepeater.ItemTemplate>
                                                    <DataTemplate x:DataType="models:HardwareAccelerator">
                                                        <Button
                                                            VerticalAlignment="Center"
                                                            AutomationProperties.Name="More info"
                                                            Content="{x:Bind utils:AppUtils.GetHardwareAcceleratorString((models:HardwareAccelerator))}"
                                                            Style="{StaticResource TertiaryButtonStyle}"
                                                            ToolTipService.ToolTip="More info">
                                                            <Button.Flyout>
                                                                <Flyout ShouldConstrainToRootBounds="False">
                                                                    <TextBlock Text="{x:Bind utils:AppUtils.GetHardwareAcceleratorDescription((models:HardwareAccelerator))}" TextWrapping="Wrap" />
                                                                </Flyout>
                                                            </Button.Flyout>
                                                        </Button>
                                                    </DataTemplate>
                                                </ItemsRepeater.ItemTemplate>
                                            </ItemsRepeater>
                                            <TextBlock VerticalAlignment="Center">
                                                <Run
                                                    FontSize="12"
                                                    Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                                    Text="{x:Bind utils:AppUtils.FileSizeToString(ModelSize)}" />
                                            </TextBlock>
                                        </StackPanel>
                                    </Grid>
                                </ItemContainer>
                            </DataTemplate>
                        </ItemsView.ItemTemplate>
                    </ItemsView>
                    <TextBlock
                        Margin="2,36,0,24"
                        Style="{StaticResource SubtitleTextBlockStyle}"
                        Text="Language" />
                    <TextBlock
                        Margin="2,36,0,24"
                        Style="{StaticResource SubtitleTextBlockStyle}"
                        Text="Multimodal" />
                    <TextBlock
                        Margin="2,36,0,24"
                        Style="{StaticResource SubtitleTextBlockStyle}"
                        Text="Generative" />
                </StackPanel>
            </Grid>
        </ScrollViewer>
        <ContentDialog x:Name="DownloadDialog" CloseButtonText="Close">
            <local:AddModelPage />
        </ContentDialog>

    </Grid>
</Page>
